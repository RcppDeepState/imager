<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>imager FAQ</title>

<script src="FAQ_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="FAQ_files/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="FAQ_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="FAQ_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="FAQ_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="FAQ_files/navigation-1.1/tabsets.js"></script>
<link href="FAQ_files/highlightjs-1.1/default.css" rel="stylesheet" />
<script src="FAQ_files/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">



<h1 class="title toc-ignore">imager FAQ</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#i-cant-install-the-package"><span class="toc-section-number">1</span> I can’t install the package</a></li>
<li><a href="#i-cant-load-a-filevideo"><span class="toc-section-number">2</span> I can’t load a file/video</a></li>
<li><a href="#i-tried-loading-a-video-and-my-computer-froze"><span class="toc-section-number">3</span> I tried loading a video and my computer froze</a></li>
<li><a href="#how-do-i-access-file-metadata"><span class="toc-section-number">4</span> How do I access file metadata?</a></li>
<li><a href="#how-do-i-overlaystack-images"><span class="toc-section-number">5</span> How do I overlay/stack images?</a></li>
<li><a href="#how-do-i-swap-axes"><span class="toc-section-number">6</span> How do I swap axes?</a></li>
<li><a href="#how-do-i-convert-images-from-another-package-e.g.raster-magick-etc."><span class="toc-section-number">7</span> How do I convert images from another package (e.g. raster, magick, etc.)?</a></li>
<li><a href="#does-imager-support-nas"><span class="toc-section-number">8</span> Does imager support NAs?</a></li>
</ul>
</div>

<p><a href="http://sites.google.com/site/simonbarthelme">Simon Barthelmé</a> (GIPSA-lab, CNRS)</p>
<div id="i-cant-install-the-package" class="section level1">
<h1><span class="header-section-number">1</span> I can’t install the package</h1>
<p>If you’re on OS X, you’re probably missing XQuartz: <a href="https://www.xquartz.org/" class="uri">https://www.xquartz.org/</a>. Otherwise, you’re probably attempting to compile from source. If you’re installing from github, try installing from CRAN (install.packages(‘imager’)). If CRAN can’t find binaries for your platform:</p>
<ul>
<li>If you’re on OS X, make sure you have installed Xcode.</li>
<li>If you’re on Linux, make sure you have all the build essentials (installing libfftw3-dev and g++ should pull all the dependencies you need).</li>
</ul>
</div>
<div id="i-cant-load-a-filevideo" class="section level1">
<h1><span class="header-section-number">2</span> I can’t load a file/video</h1>
<p>imager by itself can only load images in png, jpeg and bmp format. Install <a href="http://www.imagemagick.org/script/binary-releases.php">ImageMagick</a> for more. If you want to load videos, install <a href="http://ffmpeg.org/download.html">ffmpeg</a>.</p>
</div>
<div id="i-tried-loading-a-video-and-my-computer-froze" class="section level1">
<h1><span class="header-section-number">3</span> I tried loading a video and my computer froze</h1>
<p>imager doesn’t do out-of-memory processing, meaning the <em>whole video</em> gets loaded. Videos take up huge amounts of memory. If you really want to muck around with large videos, try the experimental package <a href="https://github.com/dahtah/imagerstreams">imagerstreams</a>, which supports out-of-memory processing.</p>
</div>
<div id="how-do-i-access-file-metadata" class="section level1">
<h1><span class="header-section-number">4</span> How do I access file metadata?</h1>
<p>Try iminfo (needs imagemagick).</p>
</div>
<div id="how-do-i-overlaystack-images" class="section level1">
<h1><span class="header-section-number">5</span> How do I overlay/stack images?</h1>
<p>For overlaying, see imdraw:</p>
<pre class="r"><code>load.example(&quot;parrots&quot;) %&gt;% imdraw(boats,opacity=.5) %&gt;% plot</code></pre>
<p><img src="FAQ_files/figure-html/unnamed-chunk-1-1.png" width="624" /></p>
<p>For stacking, use imappend:</p>
<pre class="r"><code>a &lt;- load.example(&quot;parrots&quot;)
b &lt;- boats
list(a,b) %&gt;% imappend(&quot;x&quot;) %&gt;% plot</code></pre>
<p><img src="FAQ_files/figure-html/unnamed-chunk-2-1.png" width="624" /></p>
<p>For more flexibility, you can also pad the image and use imdraw.</p>
</div>
<div id="how-do-i-swap-axes" class="section level1">
<h1><span class="header-section-number">6</span> How do I swap axes?</h1>
<p>Use permute_axes:</p>
<pre class="r"><code>permute_axes(boats,&quot;yxzc&quot;) %&gt;% plot</code></pre>
<p><img src="FAQ_files/figure-html/unnamed-chunk-3-1.png" width="624" /></p>
</div>
<div id="how-do-i-convert-images-from-another-package-e.g.raster-magick-etc." class="section level1">
<h1><span class="header-section-number">7</span> How do I convert images from another package (e.g. raster, magick, etc.)?</h1>
<p>See <a href="other_packages.html">here</a>.</p>
</div>
<div id="does-imager-support-nas" class="section level1">
<h1><span class="header-section-number">8</span> Does imager support NAs?</h1>
<p>Not really. There’s some <em>very preliminary</em> support in plot, and as.raster, and some reductions, but the limiting factor is that the underlying library <em>does not support NAs at all</em>. Some functions work, others don’t. So if you do have NAs in your data, your best bet is to get rid of them as soon as possible using interpolation. Another solution is to fill in zeros, and keep track of invalid areas using pixel sets. It’s partially a hack.</p>
<pre class="r"><code>##Which areas are valid after a box blur?
im &lt;- grayscale(boats)
im[1:2000] &lt;- NA
plot(im,col.na=&quot;red&quot;)</code></pre>
<p><img src="FAQ_files/figure-html/unnamed-chunk-4-1.png" width="624" /></p>
<pre class="r"><code>nas &lt;- px.na(im)
##Fill in with zeros
im[nas] &lt;- 0
out &lt;- boxblur(im,10)
##Invalid pixels have contributions from NA values.
invalid &lt;- boxblur(nas,10) &gt; 1e-16
#We use 1e-16 instead of strict zero because of numerical precision issues
plot(out)
highlight(invalid)</code></pre>
<p><img src="FAQ_files/figure-html/unnamed-chunk-4-2.png" width="624" /></p>
<p>I’m definitely interested in having better NA support, if only in the form of an optional ‘NA-safe’ mode that scans for NAs before attempting any unsafe operations. If you’re interested in contributing to imager, get in touch.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
